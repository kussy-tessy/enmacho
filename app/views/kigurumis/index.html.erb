<div class="container mt-2">
  <div class="alert alert-success">
    <h1>着ぐるみの検索</h1>
  </div>

  <div class="card card-body bg-light">
    <%= form_with url: search_kigurumis_path, method: 'get' do |f| %>
      <div class="form-group row">
        <label class="col-sm-3 col-form-label">キャラクター名</label>
        <%= f.text_field :character_name, id: :characterName, class: ['auto_complete','col-sm-8','form-control'] %><br>
      </div>
      <div class="form-group row">
        <label class="col-sm-3 col-form-label">作品名</label>
        <%= f.text_field :work_name, id: :workName, class: ['auto_complete', 'col-sm-8', 'form-control'] %><br>
      </div>
      <div class="form-group row">
        <label class="col-sm-3 col-form-label">工房</label>
        <%= f.select :factory_id, [''] + Factory.all.map{|e| [e.name, e.id]}, {}, {id: :factoryId, class:['auto_complete', 'col-sm-8', 'form-control']} %><br>
      </div>
      <div class="form-group row">
        <label class="col-sm-3 col-form-label">素体</label>
        <%= f.select :base_id, [], {}, {id: :baseId, class:['auto_complete', 'col-sm-8', 'form-control']} %><br>
      </div>
      <div class="row">
        <%=f.submit '検索', class: ['btn', 'col-sm-2', 'offset-sm-5', 'btn-block', 'btn-primary'] %>
      </div>
    <% end %> 
  </div>
</container>

<table id="search_result", class="table table-striped table-hover">
</table>

<script>
autoComplete.characterWorkChain({
  character: '#characterName.auto_complete',
  work: '#workName.auto_complete',
  characterUrl: '<%= auto_complete_characters_path %>', 
  characterVal: 'name',
  workUrl: '<%= auto_complete_works_url %>',
  workVal: 'name',
  characterDisplayVal: 'name_with_work'
});
</script>