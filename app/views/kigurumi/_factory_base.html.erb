$('#factory_id').on('change',function(){
  const val = $(this).val();
  $.get({
    url: '/factory/bases.json',
    dataType: 'json',
    data: {
    factory_id: val
    }
  }).done(function(data){
    $('#base_id option').remove();
    $.each(data, function(id, base){
    $('#base_id').append($('<option>').text(base.name).attr('value',base.id));
    })
  });
});